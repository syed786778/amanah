<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <meta name="description" content="Amanah - Secure marriage profile photo sharing with OTP protection by Syed Rashad">
Â  Â  <title>Amanah - Secure Photo Sharing</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YPHFTQYLE1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-YPHFTQYLE1');
    </script>
    Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
Â  Â  <style>
Â  Â  Â  Â  /* Define a refined shadow for the new card look */
Â  Â  Â  Â  .card-shadow {
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Refined, modern gradient button style for purple */
Â  Â  Â  Â  .btn-gradient-purple {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #a855f7, #9333ea);
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-gradient-purple:hover {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #9333ea, #7e22ce);
Â  Â  Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Watermark Container Style */
Â  Â  Â  Â  .watermark-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  display: inline-block; /* Essential to wrap the image */
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  max-height: 90vh;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Watermark Overlay Style */
Â  Â  Â  Â  .watermark-overlay {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%) rotate(-45deg);
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  font-size: 3vw; /* Responsive font size */
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: rgba(255, 255, 255, 0.1); /* Lighter tone, very subtle white */
Â  Â  Â  Â  Â  Â  pointer-events: none; /* Allows clicks to pass through */
Â  Â  Â  Â  Â  Â  user-select: none;
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Disable button style */
Â  Â  Â  Â  .btn-disabled {
Â  Â  Â  Â  Â  Â  background-color: #6b7280; /* Gray-500 */
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  opacity: 0.6;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="bg-gray-900 text-gray-200">
Â  Â  <div id="app"></div>
Â  Â  <script>
Â  Â  Â  Â 
Â  Â  Â  Â  const SUPABASE_URL = 'https://imiljivxosyrcosznklh.supabase.co';
Â  Â  Â  Â  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltaWxqaXZ4b3N5cmNvc3pua2xoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxMTIwOTcsImV4cCI6MjA3OTY4ODA5N30.TOgeuC3-RdG2ywIxDz2NWRhLHI4gxTkG4pilaZBqhso';
Â  Â  Â  Â Â 
Â  Â  Â  Â  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
Â  Â  Â  Â Â 
Â  Â  Â  Â  let state = {
Â  Â  Â  Â  Â  Â  view: 'home',
Â  Â  Â  Â  Â  Â  homeTab: 'upload',Â 
Â  Â  Â  Â  Â  Â  currentAlbum: null,
Â  Â  Â  Â  Â  Â  uploaderInfo: { name: '', email: '' },
Â  Â  Â  Â  Â  Â  photos: [],
Â  Â  Â  Â  Â  Â  shareLink: '',
Â  Â  Â  Â  Â  Â  otp: '',
Â  Â  Â  Â  Â  Â  otpExpiry: null,
Â  Â  Â  Â  Â  Â  viewerOtp: '',
Â  Â  Â  Â  Â  Â  albumIdToView: '',
Â  Â  Â  Â  Â  Â  isVerified: false,
Â  Â  Â  Â  Â  Â  loading: false,
Â  Â  Â  Â  Â  Â  lightboxIndex: null,
Â  Â  Â  Â  Â  Â  manageEmail: '',
Â  Â  Â  Â  Â  Â  // T&C acceptance
Â  Â  Â  Â  Â  Â  termsAccepted: false
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- Helper Functions (Abridged for brevity) ---
Â  Â  Â  Â  function genOTP(){return Math.floor(100000+Math.random()*900000).toString()}
Â  Â  Â  Â  function genAlbumId(){return'album_'+Math.random().toString(36).substr(2,9)}
Â  Â  Â  Â  function formatTime(e){const r=e-Date.now(),t=Math.floor(r/36e5),n=Math.floor(r%36e5/6e4);return t+'h '+n+'m'}
Â  Â  Â  Â  function copyText(t){navigator.clipboard.writeText(t);alert('Copied to clipboard!')}
Â  Â  Â  Â  function setupProtection(){const e=e=>{e.preventDefault();alert('Screenshots disabled for security')},t=e=>{if(e.key==='PrintScreen'||e.metaKey&&e.shiftKey&&(e.key==='3'||e.key==='4')){e.preventDefault();alert('Screenshots disabled for security')}};document.addEventListener('contextmenu',e);document.addEventListener('keydown',t)}
Â  Â  Â  Â  function openLightbox(index){state.lightboxIndex=index;render()}
Â  Â  Â  Â  function closeLightbox(){state.lightboxIndex=null;render()}
Â  Â  Â  Â  function nextPhoto(){if(state.lightboxIndex<state.currentAlbum.photos.length-1){state.lightboxIndex++;render()}}
Â  Â  Â  Â  function prevPhoto(){if(state.lightboxIndex>0){state.lightboxIndex--;render()}}
Â  Â  Â  Â  function handleFiles(e){const t=Array.from(e.target.files);Promise.all(t.map(e=>new Promise(t=>{const n=new FileReader();n.onload=e=>t(e.target.result);n.readAsDataURL(e)}))).then(e=>{state.photos=[...state.photos,...e];render()})}
Â  Â  Â  Â  function nav(e){state.view=e;if(e==='home'||e==='upload'||e==='manage'||e==='viewer'){state.photos=[];state.uploaderInfo={name:'',email:''};state.currentAlbum=null;state.isVerified=false;state.viewerOtp='';state.albumIdToView='';state.lightboxIndex=null;state.manageEmail='';window.history.pushState({},document.title,location.pathname)}render()}
Â  Â  Â  Â  function toggleTerms(checkbox) {
Â  Â  Â  Â  Â  Â  state.termsAccepted = checkbox.checked;
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Core Logic Functions (Abridged for brevity) ---
Â  Â  Â  Â  async function manageAlbum(){
Â  Â  Â  Â  Â  Â  Â if(!state.manageEmail){alert('Please enter your email');return}state.loading=true;render();try{const{data:albums,error}=await supabase.from('albums').select('*').eq('email',state.manageEmail.trim().toLowerCase());if(error)throw error;if(!albums||albums.length===0){alert('No albums found with this email address.');state.loading=false;render();return}if(albums.length===1){const album=albums[0];const{data:photos,error:photoError}=await supabase.from('photos').select('*').eq('album_id',album.id).order('created_at',{ascending:true});if(photoError)throw photoError;state.currentAlbum={...album,photos:photos.map(p=>p.photo_data)};state.otp=album.otp;state.otpExpiry=album.otp_expiry;state.shareLink=location.origin+location.pathname+'?album='+album.id;state.view='gallery';state.loading=false;render()}else{state.loading=false;alert('Multiple albums found. Select one:');const albumList=albums.map((a,i)=>`${i+1}. Album ID: ${a.id} (Created: ${new Date(a.created_at).toLocaleDateString()})`).join('\n');const selection=prompt(albumList+'\n\nEnter number (1-'+albums.length+'):');if(selection){const idx=parseInt(selection)-1;if(idx>=0&&idx<albums.length){const album=albums[idx];const{data:photos,error:photoError}=await supabase.from('photos').select('*').eq('album_id',album.id).order('created_at',{ascending:true});if(photoError)throw photoError;state.currentAlbum={...album,photos:photos.map(p=>p.photo_data)};state.otp=album.otp;state.otpExpiry=album.otp_expiry;state.shareLink=location.origin+location.pathname+'?album='+album.id;state.view='gallery';render()}else{alert('Invalid selection')}}}}catch(e){console.error('Manage error:',e);alert('Failed to load albums: '+e.message);state.loading=false;render()}}
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function upload(){
Â  Â  Â  Â  Â  Â  if (!state.termsAccepted) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('You must accept the Terms & Conditions before creating an album.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if(!state.uploaderInfo.name||!state.uploaderInfo.email||!state.photos.length){alert('Please fill all required fields and upload at least one photo');return}state.loading=true;render();try{const e=genAlbumId(),t=genOTP(),n=Date.now()+864e5,{data:a,error:o}=await supabase.from('albums').insert({id:e,name:state.uploaderInfo.name,email:state.uploaderInfo.email.trim().toLowerCase(),otp:t,otp_expiry:n,created_at:Date.now()}).select().single();if(o)throw o;const{error:r}=await supabase.from('photos').insert(state.photos.map(t=>({album_id:e,photo_data:t})));if(r)throw r;const{data:s,error:i}=await supabase.from('photos').select('*').eq('album_id',e).order('created_at',{ascending:true});if(i)throw i;state.currentAlbum={...a,photos:s.map(e=>e.photo_data)};state.otp=t;state.otpExpiry=n;state.shareLink=location.origin+location.pathname+'?album='+e;state.view='gallery';state.loading=false;render()}catch(e){console.error('Upload error:',e);alert('Failed to create album: '+e.message);state.loading=false;render()}}

Â  Â  Â  Â  async function regenOTP(){
Â  Â  Â  Â  Â  Â  if(!state.currentAlbum)return;state.loading=true;render();try{const e=genOTP(),t=Date.now()+864e5,{error:n}=await supabase.from('albums').update({otp:e,otp_expiry:t}).eq('id',state.currentAlbum.id);if(n)throw n;state.currentAlbum.otp=e;state.otp=e;state.otpExpiry=t;state.loading=false;alert('New OTP generated successfully!');render()}catch(e){console.error('OTP error:',e);alert('Failed to regenerate OTP: '+e.message);state.loading=false;render()}}
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function expireOTP(){
Â  Â  Â  Â  Â  Â  if(!state.currentAlbum)return;if(!confirm('Expire OTP now? This will immediately block all access to your album.'))return;state.loading=true;render();try{const e=Date.now()-1000,{error:t}=await supabase.from('albums').update({otp_expiry:e}).eq('id',state.currentAlbum.id);if(t)throw t;state.currentAlbum.otp_expiry=e;state.otpExpiry=e;state.loading=false;alert('OTP expired successfully! No one can access this album now.');render()}catch(e){console.error('Expire OTP error:',e);alert('Failed to expire OTP: '+e.message);state.loading=false;render()}}
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function verify(){
Â  Â  Â  Â  Â  Â  if(!state.albumIdToView||!state.viewerOtp){alert('Please enter both Album ID and OTP');return}state.loading=true;render();try{const{data:e,error:t}=await supabase.from('albums').select('*').eq('id',state.albumIdToView).single();if(t||!e){alert('Album not found. Please check your Album ID.');state.loading=false;render();return}if(Date.now()>e.otp_expiry){alert('OTP has expired. Please contact the album owner to regenerate it.');state.loading=false;render();return}if(e.otp!==state.viewerOtp){alert('Invalid OTP. Please check and try again.');state.loading=false;render();return}const{data:n,error:a}=await supabase.from('photos').select('*').eq('album_id',state.albumIdToView).order('created_at',{ascending:true});if(a)throw a;state.currentAlbum={...e,photos:n.map(e=>e.photo_data)};state.isVerified=true;state.view='view';state.loading=false;setupProtection();render()}catch(e){console.error('Verify error:',e);alert('Failed to verify album: '+e.message);state.loading=false;render()}}
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function delPhoto(e){
Â  Â  Â  Â  Â  Â  if(!confirm('Are you sure you want to delete this photo?'))return;state.loading=true;render();try{const{data:t,error:n}=await supabase.from('photos').select('id').eq('album_id',state.currentAlbum.id).order('created_at',{ascending:true});if(n)throw n;if(t.length===1){if(confirm('This is the last photo. Delete the entire album?')){await delAlbum();return}else{state.loading=false;render();return}}const a=t[e],{error:o}=await supabase.from('photos').delete().eq('id',a.id);if(o)throw o;state.currentAlbum.photos=state.currentAlbum.photos.filter((t,n)=>n!==e);state.loading=false;alert('Photo deleted successfully');render()}catch(e){console.error('Delete error:',e);alert('Failed to delete photo: '+e.message);state.loading=false;render()}}
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function delAlbum(){
Â  Â  Â  Â  Â  Â  if(!confirm('Are you sure you want to delete this entire album? This action cannot be undone.'))return;state.loading=true;render();try{const{error:e}=await supabase.from('albums').delete().eq('id',state.currentAlbum.id);if(e)throw e;state.view='home';state.currentAlbum=null;state.loading=false;alert('Album deleted successfully');render()}catch(e){console.error('Delete error:',e);alert('Failed to delete album: '+e.message);state.loading=false;render()}}

Â  Â  Â  Â  // --- Modular Render Functions (UPDATED Footer and Home View) ---

Â  Â  Â  Â  function renderFooter(){
Â  Â  Â  Â  Â  Â  // UPDATED: Merged About Amanah story into the footer structure
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <footer class="bg-gray-900 border-t border-gray-700 text-gray-500 mt-16">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-6xl mx-auto px-4 py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid md:grid-cols-4 gap-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="md:col-span-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-4 text-purple-400 flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  About Amanah
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-400 mb-3 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Amanah was conceived by **Syed Rashad** out of a genuine need for digital security in sensitive, private matters like matrimonial profile sharing.Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Frustrated by the lack of control and misuse of personal photos, Syedâ€”driven by his passion for technology and problem-solvingâ€”developed this platform to offer a controlled, traceable, and protected environment.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Syed applies his operational expertise and commitment to excellent customer experience as a **Senior Manager at a WealthTech firm** and advises early-stage startups. Amanah reflects his dedication to secure, efficient digital solutions.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-4 text-purple-400">Legal & Security</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="space-y-2 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="text-red-400 font-semibold">âš ï¸ Cybercrime Warning</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#" onclick="nav(\'terms\'); return false;" class="text-purple-300 hover:text-purple-100 underline">Terms & Conditions</a></li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 mt-4 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  **Disclaimer:** Use at your own risk. The platform owner is not liable for user-uploaded content or misuse.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-4 text-purple-400">Contact</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-400 mb-2">Email: help.amanahapp@gmail.com </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500 mt-4">Â© 2024 Amanah by Syed Rashad</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="border-t border-gray-800 mt-6 pt-6 text-center text-xs text-gray-600">Ø£Ù…Ø§Ù†Ø© - Trustworthy Protection</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </footer>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderLoading(){
Â  Â  Â  Â  Â  Â  return '<div class="fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center"><div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500"></div><span class="mt-4 text-xl font-semibold text-gray-300">Processing secure request...</span></div>';
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderHomeView() {
Â  Â  Â  Â  Â  Â  const actionCard = (title, color, icon, content, buttonText, buttonAction) => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700 card-shadow transition-all duration-300 hover:border-${color}-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-${color}-900/50 p-3 rounded-xl mr-4 border border-${color}-500/50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-8 h-8 text-${color}-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">${icon}</svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-100">${title}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-4 text-gray-400 mb-8">${content}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="${buttonAction}" class="w-full text-white py-3 rounded-xl font-bold text-lg transition-all duration-300 ${color === 'purple' ? 'btn-gradient-purple' : `bg-${color}-600 hover:bg-${color}-700`}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${buttonText}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const uploadContent = `
Â  Â  Â  Â  Â  Â  Â  Â  <p>1. Enter your details and upload photos securely.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>2. Receive a unique Album ID, OTP, and shareable link.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>3. Maintain full control over access and deletion.</p>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const manageContent = `
Â  Â  Â  Â  Â  Â  Â  Â  <p>1. Enter the email used during album creation.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>2. Access your security dashboard.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>3. Regenerate OTP, expire access, or delete the album instantly.</p>
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  const viewerContent = `
Â  Â  Â  Â  Â  Â  Â  Â  <p>1. Enter the Album ID and 6-digit OTP provided by the owner.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>2. View photos instantly on any device.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>3. Access is secured with screenshot protection and a 24-hour expiration.</p>
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  // REMOVED: The verbose 'About Amanah' section has been moved to the footer.

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-screen pt-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-16">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-16 h-16 text-purple-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="text-5xl font-extrabold text-white mb-2 tracking-tight">Amanah</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl text-gray-400 mb-6">Secure, Controlled Photo Sharing for Matrimony</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid md:grid-cols-3 gap-8 mb-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${actionCard('Upload Photos', 'purple', '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>', uploadContent, 'Start New Upload', 'nav(\'upload\')')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${actionCard('Manage Access', 'orange', '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>', manageContent, 'Access Management', 'nav(\'manage\')')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${actionCard('View Album', 'pink', '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>', viewerContent, 'Enter Album ID & OTP', 'nav(\'viewer\')')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-gray-200 mb-4 flex items-center"><svg class="w-6 h-6 mr-2 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>Cybercrime Warning</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-red-400">Unauthorized morphing, editing, misusing, or distributing photos from this platform is a criminal offense under IT Act 2000 and global cyber laws. Violators will be prosecuted.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderUploadView() {
Â  Â  Â  Â  Â  Â  // Determine button class based on T&C acceptance
Â  Â  Â  Â  Â  Â  const buttonClass = state.termsAcceptedÂ 
Â  Â  Â  Â  Â  Â  Â  Â  ? 'btn-gradient-purple shadow-lg'Â 
Â  Â  Â  Â  Â  Â  Â  Â  : 'btn-disabled bg-gray-600';

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-screen pt-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="nav('home')" class="mb-6 text-purple-400 hover:text-purple-300 font-semibold flex items-center">â† Back to Home</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold mb-8 text-center text-purple-400">Secure Photo Upload</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="uploaderName" class="block text-gray-400 font-semibold mb-2">Your Name <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="uploaderName" oninput="state.uploaderInfo.name=this.value" value="${state.uploaderInfo.name}" placeholder="Full Name" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="uploaderEmail" class="block text-gray-400 font-semibold mb-2">Your Email <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="uploaderEmail" oninput="state.uploaderInfo.email=this.value" value="${state.uploaderInfo.email}" placeholder="your.email@example.com" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="photoUpload" class="block text-gray-400 font-semibold mb-2">Upload Photos <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="photoUpload" accept="image/*" multiple onchange="handleFiles(event)" class="w-full text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700 cursor-pointer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${state.photos.length ? `<p class="mt-2 text-sm text-green-400 font-medium">âœ“ ${state.photos.length} photo(s) selected</p>` : `<p class="mt-2 text-sm text-gray-500">Select one or more images</p>`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${state.photos.length ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-8 mb-6 border-t border-gray-700 pt-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg font-semibold text-gray-300 mb-3">Preview (${state.photos.length}):</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-4 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${state.photos.map((p,idx)=>'<img src="'+p+'" alt="Preview '+idx+'" class="w-full h-16 object-cover rounded-lg border border-gray-600">').join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-8 mb-6 flex items-start">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="termsAccept" onchange="toggleTerms(this)" ${state.termsAccepted ? 'checked' : ''} class="mt-1 w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="termsAccept" class="ml-3 text-sm font-medium text-gray-300">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  I have read and agree to theÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" onclick="nav('terms'); return false;" class="text-purple-400 hover:text-purple-300 underline font-semibold">Terms & Conditions</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  and assume all legal responsibility for the uploaded content.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="upload()" class="w-full text-white py-4 mt-6 rounded-xl font-bold text-lg ${buttonClass}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Create Album and Get OTP
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderManageView() {
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-screen pt-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-md mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="nav('home')" class="mb-6 text-orange-400 hover:text-orange-300 font-semibold flex items-center">â† Back to Home</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold mb-8 text-center text-orange-400">Access Album Management</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-400 mb-6 text-center">Enter the email used to create the album to access controls.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="manageEmail" class="block text-gray-400 font-semibold mb-2">Your Email <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="manageEmail" oninput="state.manageEmail=this.value" value="${state.manageEmail}" placeholder="Enter album creation email" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="manageAlbum()" class="w-full bg-orange-600 text-white py-4 rounded-xl font-bold text-lg transition-all duration-300 hover:bg-orange-700 shadow-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Access Management Dashboard
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6 bg-gray-700/50 border-l-4 border-orange-500 p-4 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-300">ğŸ’¡ If you have multiple albums, you will be prompted to select one.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderViewerView() {
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-screen pt-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-md mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="nav('home')" class="mb-6 text-pink-400 hover:text-pink-300 font-semibold flex items-center">â† Back to Home</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold mb-8 text-center text-pink-400">Enter Access Credentials</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-red-900/50 border-l-4 border-red-500 p-4 mb-6 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-red-300 leading-relaxed"><strong>âš ï¸ Warning:</strong> This is private content. Unauthorized use or distribution is illegal.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="viewerAlbumId" class="block text-gray-400 font-semibold mb-2">Album ID <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="viewerAlbumId" value="${state.albumIdToView}" oninput="state.albumIdToView=this.value.trim()" placeholder="Enter album ID" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 font-mono focus:outline-none focus:ring-2 focus:ring-pink-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="viewerOtpInput" class="block text-gray-400 font-semibold mb-2">OTP <span class="text-red-500">*</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="viewerOtpInput" inputmode="numeric" maxlength="6" oninput="state.viewerOtp=this.value.trim()" placeholder="6-digit OTP" class="w-full px-4 py-4 bg-gray-700 border border-gray-600 rounded-lg text-center text-3xl font-mono text-gray-100 focus:outline-none focus:ring-2 focus:ring-pink-500 tracking-widest">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="verify()" class="w-full bg-pink-600 text-white py-4 rounded-xl font-bold text-lg transition-all duration-300 hover:bg-pink-700 shadow-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Access Secure Album
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderGalleryView() {
Â  Â  Â  Â  Â  Â  const exp = Date.now() > state.otpExpiry;
Â  Â  Â  Â  Â  Â  const otpStatus = expÂ 
Â  Â  Â  Â  Â  Â  Â  Â  ? '<span class="text-red-400 font-bold">(Expired)</span>'Â 
Â  Â  Â  Â  Â  Â  Â  Â  : `<span class="text-green-400 font-bold">(Active)</span>`;
Â  Â  Â  Â  Â  Â  const expiryMessage = exp ? 'Access has been revoked.' : `Expires in: ${formatTime(state.otpExpiry)}`;

Â  Â  Â  Â  Â  Â  const galleryContent = state.currentAlbum.photos.map((p, i) => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${p}" onclick="openLightbox(${i})" class="w-full h-40 object-cover rounded-lg shadow-md cursor-pointer transition-all hover:scale-[1.02] border-2 border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="delPhoto(${i})" class="absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full text-sm opacity-0 group-hover:opacity-100 transition-all hover:bg-red-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');

Â  Â  Â  Â  Â  Â  return `<div class="min-h-screen pt-12"><div class="max-w-4xl mx-auto px-4"><button onclick="nav('home')" class="mb-6 text-purple-400 hover:text-purple-300 font-semibold flex items-center">â† Back to Home</button><div class="bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-700"><h2 class="text-3xl font-bold mb-8 text-center text-green-400">Album: ${state.currentAlbum.name}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid md:grid-cols-2 gap-8 mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-700 rounded-xl p-6 border border-purple-600/50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold text-xl mb-4 text-purple-400 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2v4m-4 1h-4m-2 0h-2m-2 0h-2m4-4h-4m-2 0h-2m-2 0h-2M4 7h16a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4a2 2 0 012-2z"/></svg>Access Details</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-300 mb-2"><strong>Album ID:</strong> <span class="font-mono text-purple-300">${state.currentAlbum.id}</span></p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-300 mb-2"><strong>Current OTP:</strong> <span class="font-mono text-xl text-purple-300">${state.otp}</span> ${otpStatus}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-400">${expiryMessage}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-700 rounded-xl p-6 border border-red-600/50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold text-xl mb-4 text-red-400 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6-6v2m12-2v2m-6-4v2m-6-4v2m12-2v2m-6-4v2m-6-4v2m12-2v2M4 7h16M4 17h16M4 21h16a2 2 0 002-2V5a2 2 0 00-2-2H4a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>Control Panel</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="regenOTP()" class="w-full bg-orange-600 text-white py-2 rounded-lg font-semibold text-sm mb-2 transition-all duration-300 hover:bg-orange-700">Regenerate New OTP</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="expireOTP()" class="w-full bg-yellow-600 text-white py-2 rounded-lg font-semibold text-sm mb-2 transition-all duration-300 hover:bg-yellow-700">Expire OTP Now</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="delAlbum()" class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold text-sm transition-all duration-300 hover:bg-red-700">Delete Entire Album</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-2xl font-bold text-gray-200 mb-6 border-b border-gray-700 pb-3">Uploaded Photos (${state.currentAlbum.photos.length})</p>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${galleryContent}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  ${state.lightboxIndex !== null ? renderLightbox() : ''}
Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderLightbox() {
Â  Â  Â  Â  Â  Â  const currentPhoto = state.currentAlbum.photos[state.lightboxIndex];
Â  Â  Â  Â  Â  Â  const watermarkText = `PIC AMANAH - ${state.currentAlbum.id}`;
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="fixed inset-0 bg-gray-900/95 z-50 flex items-center justify-center p-4" onclick="closeLightbox()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="watermark-container" onclick="event.stopPropagation()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${currentPhoto}" alt="Full Photo" class="max-h-[90vh] max-w-full object-contain" style="display: block;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="watermark-overlay">${watermarkText}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white text-3xl z-50 hover:text-red-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${state.lightboxIndex > 0 ? `<button onclick="prevPhoto()" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-4xl z-50 opacity-70 hover:opacity-100 hover:text-purple-400">â†</button>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${state.lightboxIndex < state.currentAlbum.photos.length - 1 ? `<button onclick="nextPhoto()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-4xl z-50 opacity-70 hover:opacity-100 hover:text-purple-400">â†’</button>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderTermsView() {
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-screen pt-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-4xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="nav('home')" class="mb-6 text-purple-400 hover:text-purple-300 font-semibold flex items-center">â† Back to Home</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold mb-8 text-center text-purple-400">Terms & Conditions of Use (Amanah)</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6 text-gray-300">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>1. Acceptance of Terms:</strong> By using Amanah, you agree to these Terms & Conditions. If you do not agree, you must not use this service.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>2. User Responsibility (Uploader):</strong> You are solely responsible for all content you upload. You warrant that you have the right to upload the content and that it does not violate any laws or third-party rights. You must use the service only for the intended purpose of secure, private matrimonial sharing.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>3. Photo Security & Disclaimer:</strong> While Amanah implements security measures (OTP, watermark, anti-screenshot measures), no digital system is infallible. The platform owner is NOT responsible for misuse, illegal distribution, or unauthorized access resulting from user negligence or failure of protective measures.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>4. Album Access & Expiration:</strong> Albums are created with a 24-hour OTP expiration period. It is the uploader's responsibility to manage, regenerate, or expire the OTP as needed. The platform owner will not grant access to albums without the correct OTP and Album ID.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>5. Prohibited Use:</strong> You may not upload, view, or distribute content that is illegal, defamatory, obscene, or violates intellectual property rights. Violation will result in immediate album deletion and reporting to law enforcement.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>6. Data Deletion:</strong> The uploader has the right to delete photos or the entire album at any time via the management dashboard. Once deleted, content is permanently removed from the database.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-red-400 font-semibold mt-8"><strong>LEGAL WARNING:</strong> Unauthorized morphing, editing, misusing, or distributing photos from this platform is a criminal offense under IT Act 2000 and global cyber laws. Violators will be prosecuted to the full extent of the law.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderFooter()}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Main Render & Init ---
Â  Â  Â  Â  function render() {
Â  Â  Â  Â  Â  Â  const app = document.getElementById('app');
Â  Â  Â  Â  Â  Â  if (state.loading) {
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderLoading();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  switch (state.view) {
Â  Â  Â  Â  Â  Â  Â  Â  case 'home':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderHomeView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'upload':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderUploadView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'manage':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderManageView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'viewer':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderViewerView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'gallery':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderGalleryView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'view':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderGalleryView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'terms':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderTermsView();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  default:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = renderHomeView();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (state.lightboxIndex !== null && state.view === 'gallery') {
Â  Â  Â  Â  Â  Â  Â  Â  // Re-render lightbox to ensure event listeners are active
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML += renderLightbox();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  Â  Â  function init() {
Â  Â  Â  Â  Â  Â  const params = new URLSearchParams(window.location.search);
Â  Â  Â  Â  Â  Â  const albumId = params.get('album');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (albumId) {
Â  Â  Â  Â  Â  Â  Â  Â  state.albumIdToView = albumId;
Â  Â  Â  Â  Â  Â  Â  Â  state.view = 'viewer';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  init();
Â  Â  </script>
</body>
</html>
